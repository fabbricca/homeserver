apiVersion: v1
kind: ConfigMap
metadata:
  name: cognitia-api-config
  namespace: cognitia
  labels:
    app.kubernetes.io/name: cognitia-api
    app.kubernetes.io/component: api
    app.kubernetes.io/part-of: cognitia
data:
  # Orchestrator (optional, for SSE chat streaming)
  COGNITIA_CORE_URL: "http://10.0.0.15:8080"

  # Ollama fallback (optional)
  OLLAMA_URL: "http://10.0.0.15:11434"
  OLLAMA_MODEL: "llama3.2:3b"

  # Avatar storage path (API writes files here)
  AVATAR_UPLOAD_DIR: "/app/web/avatars"

  # Database (PostgreSQL)
  DATABASE_URL: "postgresql+asyncpg://cognitia:cognitia-db-secret-2024@cognitia-postgres:5432/cognitia"

  # JWT (JWKS / RS256)
  JWKS_URL: "http://cognitia-auth:8000/.well-known/jwks.json"
  JWT_ISSUER: "https://auth.cognitia.iberu.me"
  JWT_AUDIENCE: "cognitia-api"

  # Redis (cache + streams)
  REDIS_URL: "redis://cognitia-redis:6379/0"
  CACHE_TTL_SESSION: "600"
  CACHE_TTL_CHAT: "600"
  CACHE_TTL_CHARACTER: "600"

  # Memory service (GPU host)
  MEMORY_SERVICE_URL: "http://10.0.0.15:8002"
